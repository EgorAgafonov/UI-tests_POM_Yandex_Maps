{"uid":"c08338bb69ca946e","name":"Определение геолокации пользователя на карте","fullName":"tests.map_page_positive.TestMapPagePositive#test_current_geoloc_btn_click","historyId":"be4543e2fa7903a7c5644c9191d7b844","time":{"start":1711024025244,"stop":1711024037265,"duration":12021},"description":"Позитивный тест проверки работы кнопки \"Моё местоположение\", определяющую текущую геолокацию пользователя.\n        Тестирование выполняется без предварительной авторизации пользователя в системе. Аргумент current_geoloc должен\n        содержать строчное наименование города(населенного пункта) с заглавной буквы, в котором пользователь находится\n        в момент теста. Валидация теста выполнена успешно в случае, если место фактического местонахождения пользователя\n        совпадает с местом, отображаемом на карте.","descriptionHtml":"<p>Позитивный тест проверки работы кнопки &quot;Моё местоположение&quot;, определяющую текущую геолокацию пользователя.<br />\nТестирование выполняется без предварительной авторизации пользователя в системе. Аргумент current_geoloc должен<br />\nсодержать строчное наименование города(населенного пункта) с заглавной буквы, в котором пользователь находится<br />\nв момент теста. Валидация теста выполнена успешно в случае, если место фактического местонахождения пользователя<br />\nсовпадает с местом, отображаемом на карте.</p>\n","status":"failed","statusMessage":"AssertionError: ОШИБКА! Город геолокации пользователя на сайте:'Москва' не совпадает с городом в момент тестирования (фактическим): 'Видное'.\nassert 'Москва' == 'Видное'\n  - Видное\n  + Москва","statusTrace":"self = <tests.map_page_positive.TestMapPagePositive object at 0x000001819E154700>, driver = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"6f775a5a693c40a85cdbfe39f05330b1\")>, current_geoloc = 'Видное'\n\n    @pytest.mark.geoloc\n    @allure.severity(allure.severity_level.CRITICAL)\n    @allure.title(\"Определение геолокации пользователя на карте\")\n    @allure.story(\"Определение текущей геолокации пользователя на карте\")\n    @allure.testcase(\"https://yandex.ru/maps\", \"TC-YMPS-GLC-01\")\n    @allure.link(\"https://yandex.ru/maps\", name=\"https://yandex.ru/maps\")\n    def test_current_geoloc_btn_click(self, driver, current_geoloc='Видное'):\n        \"\"\"Позитивный тест проверки работы кнопки \"Моё местоположение\", определяющую текущую геолокацию пользователя.\n        Тестирование выполняется без предварительной авторизации пользователя в системе. Аргумент current_geoloc должен\n        содержать строчное наименование города(населенного пункта) с заглавной буквы, в котором пользователь находится\n        в момент теста. Валидация теста выполнена успешно в случае, если место фактического местонахождения пользователя\n        совпадает с местом, отображаемом на карте.\"\"\"\n    \n        with allure.step(\"Шаг 1: Перейти на сайт https://yandex.ru/maps/ и дождаться полной загрузки всех элементов.\"):\n            page = MainPage(driver)\n            page.wait_page_loaded()\n        with allure.step(\"Шаг 2: Нажать на элемент 'Моё местоположение'(стрелка геолокации).\"):\n            page.my_current_geoloc_btn_click(driver)\n            page.wait_page_loaded()\n            page.zoom_out_map(driver, amount=\"high\")\n            page.wait_page_loaded()\n        with allure.step(\"Шаг 3: Выполнить сравнение ожидаемого и фактического результатов теста.\"):\n            parsed_geoloc = page.get_current_geoloc_name(driver)\n            page.make_screenshot(file_path=screenshots_folder + \"\\\\test_current_geoloc_btn_.png\")\n            allure.attach(page.get_page_screenshot_PNG(),\n                          name=\"current_geoloc_btn_click_actual\",\n                          attachment_type=allure.attachment_type.PNG)\n>           assert parsed_geoloc == current_geoloc, (f\"ОШИБКА! Город геолокации пользователя на сайте:'{parsed_geoloc}'\"\n                                                     f\" не совпадает с городом в момент тестирования (фактическим): \"\n                                                     f\"'{current_geoloc}'.\")\nE           AssertionError: ОШИБКА! Город геолокации пользователя на сайте:'Москва' не совпадает с городом в момент тестирования (фактическим): 'Видное'.\nE           assert 'Москва' == 'Видное'\nE             - Видное\nE             + Москва\n\nmap_page_positive.py:80: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_verify_url","time":{"start":1711024007669,"stop":1711024007669,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1711024007669,"stop":1711024007669,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1711024007669,"stop":1711024007669,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1711024007669,"stop":1711024007669,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"driver","time":{"start":1711024007669,"stop":1711024012058,"duration":4389},"status":"passed","steps":[{"name":"SETUP 1/2: Определить драйвер и настройки Chrome","time":{"start":1711024007670,"stop":1711024010008,"duration":2338},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"SETUP 2/2: Перейти на страницу https://yandex.ru/maps/","time":{"start":1711024010008,"stop":1711024294566,"duration":284558},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"stepsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"stepsCount":2,"hasContent":true,"attachmentStep":false},{"name":"sensitive_url","time":{"start":1711024012059,"stop":1711024012059,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_skip_sensitive","time":{"start":1711024025244,"stop":1711024025244,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"stepsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Позитивный тест проверки работы кнопки \"Моё местоположение\", определяющую текущую геолокацию пользователя.\n        Тестирование выполняется без предварительной авторизации пользователя в системе. Аргумент current_geoloc должен\n        содержать строчное наименование города(населенного пункта) с заглавной буквы, в котором пользователь находится\n        в момент теста. Валидация теста выполнена успешно в случае, если место фактического местонахождения пользователя\n        совпадает с местом, отображаемом на карте.","status":"failed","statusMessage":"AssertionError: ОШИБКА! Город геолокации пользователя на сайте:'Москва' не совпадает с городом в момент тестирования (фактическим): 'Видное'.\nassert 'Москва' == 'Видное'\n  - Видное\n  + Москва","statusTrace":"self = <tests.map_page_positive.TestMapPagePositive object at 0x000001819E154700>, driver = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"6f775a5a693c40a85cdbfe39f05330b1\")>, current_geoloc = 'Видное'\n\n    @pytest.mark.geoloc\n    @allure.severity(allure.severity_level.CRITICAL)\n    @allure.title(\"Определение геолокации пользователя на карте\")\n    @allure.story(\"Определение текущей геолокации пользователя на карте\")\n    @allure.testcase(\"https://yandex.ru/maps\", \"TC-YMPS-GLC-01\")\n    @allure.link(\"https://yandex.ru/maps\", name=\"https://yandex.ru/maps\")\n    def test_current_geoloc_btn_click(self, driver, current_geoloc='Видное'):\n        \"\"\"Позитивный тест проверки работы кнопки \"Моё местоположение\", определяющую текущую геолокацию пользователя.\n        Тестирование выполняется без предварительной авторизации пользователя в системе. Аргумент current_geoloc должен\n        содержать строчное наименование города(населенного пункта) с заглавной буквы, в котором пользователь находится\n        в момент теста. Валидация теста выполнена успешно в случае, если место фактического местонахождения пользователя\n        совпадает с местом, отображаемом на карте.\"\"\"\n    \n        with allure.step(\"Шаг 1: Перейти на сайт https://yandex.ru/maps/ и дождаться полной загрузки всех элементов.\"):\n            page = MainPage(driver)\n            page.wait_page_loaded()\n        with allure.step(\"Шаг 2: Нажать на элемент 'Моё местоположение'(стрелка геолокации).\"):\n            page.my_current_geoloc_btn_click(driver)\n            page.wait_page_loaded()\n            page.zoom_out_map(driver, amount=\"high\")\n            page.wait_page_loaded()\n        with allure.step(\"Шаг 3: Выполнить сравнение ожидаемого и фактического результатов теста.\"):\n            parsed_geoloc = page.get_current_geoloc_name(driver)\n            page.make_screenshot(file_path=screenshots_folder + \"\\\\test_current_geoloc_btn_.png\")\n            allure.attach(page.get_page_screenshot_PNG(),\n                          name=\"current_geoloc_btn_click_actual\",\n                          attachment_type=allure.attachment_type.PNG)\n>           assert parsed_geoloc == current_geoloc, (f\"ОШИБКА! Город геолокации пользователя на сайте:'{parsed_geoloc}'\"\n                                                     f\" не совпадает с городом в момент тестирования (фактическим): \"\n                                                     f\"'{current_geoloc}'.\")\nE           AssertionError: ОШИБКА! Город геолокации пользователя на сайте:'Москва' не совпадает с городом в момент тестирования (фактическим): 'Видное'.\nE           assert 'Москва' == 'Видное'\nE             - Видное\nE             + Москва\n\nmap_page_positive.py:80: AssertionError","steps":[{"name":"Шаг 1: Перейти на сайт https://yandex.ru/maps/ и дождаться полной загрузки всех элементов.","time":{"start":1711024025245,"stop":1711024028507,"duration":3262},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Шаг 2: Нажать на элемент 'Моё местоположение'(стрелка геолокации).","time":{"start":1711024028507,"stop":1711024036829,"duration":8322},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Шаг 3: Выполнить сравнение ожидаемого и фактического результатов теста.","time":{"start":1711024036830,"stop":1711024037264,"duration":434},"status":"failed","statusMessage":"AssertionError: ОШИБКА! Город геолокации пользователя на сайте:'Москва' не совпадает с городом в момент тестирования (фактическим): 'Видное'.\nassert 'Москва' == 'Видное'\n  - Видное\n  + Москва\n","statusTrace":"  File \"C:\\Users\\agafo\\PycharmProjects\\YandexMaps\\tests\\map_page_positive.py\", line 80, in test_current_geoloc_btn_click\n    assert parsed_geoloc == current_geoloc, (f\"ОШИБКА! Город геолокации пользователя на сайте:'{parsed_geoloc}'\"\n","steps":[],"attachments":[{"uid":"ed570a3b83bd37eb","name":"current_geoloc_btn_click_actual","source":"ed570a3b83bd37eb.png","type":"image/png","size":998393}],"parameters":[],"attachmentsCount":1,"shouldDisplayMessage":true,"stepsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"attachmentsCount":1,"shouldDisplayMessage":true,"stepsCount":3,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"driver::0","time":{"start":1711024294566,"stop":1711024297007,"duration":2441},"status":"passed","steps":[{"name":"TEAR UP: Закрыть браузер Chrome","time":{"start":1711024294566,"stop":1711024297007,"duration":2441},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"stepsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"stepsCount":1,"hasContent":true,"attachmentStep":false}],"labels":[{"name":"feature","value":"Функциональное тестирование UI (позитивные тесты)"},{"name":"language","value":"Python"},{"name":"story","value":"Определение текущей геолокации пользователя на карте"},{"name":"Агафонов Е.А.","value":"владелец"},{"name":"epic","value":"UI-Yandex.Карты"},{"name":"framework","value":"Pytest"},{"name":"severity","value":"critical"},{"name":"tag","value":"geoloc"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"map_page_positive"},{"name":"subSuite","value":"TestMapPagePositive"},{"name":"host","value":"DESKTOP-J32RPI2"},{"name":"thread","value":"1204-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.map_page_positive"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[{"name":"https://yandex.ru/maps","url":"https://yandex.ru/maps","type":"link"},{"name":"TC-YMPS-GLC-01","url":"https://yandex.ru/maps","type":"tms"}],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["geoloc"]},"source":"c08338bb69ca946e.json","parameterValues":[]}